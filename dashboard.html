<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Admin Dashboard</title>
  <link rel="stylesheet" href="admin.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-app.js";
  import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.0/firebase-auth.js";

  const firebaseConfig = {
    apiKey: "AIzaSyCn553qWsVz2VF1dZ4Ji5OkQDGFvMORbJE",
    authDomain: "pg-data-ed1c2.firebaseapp.com",
    projectId: "pg-data-ed1c2"
  };

  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);

  onAuthStateChanged(auth, user => {
    if (!user) {
      window.location.href = "admin-login.html"; // Redirect if not logged in
    }
  });
</script>
</head>
<body class="dark-theme">

  <!-- Sidebar -->
  <div class="sidebar">
    <h2>Admin Panel</h2>
    <ul>
      <li><a href="#">Dashboard</a></li>
      <li><a href="#">Transactions</a></li>
      <li><a href="#">Settings</a></li>
      <li><button id="logoutBtn">Logout</button></li>
    </ul>
    <div class="theme-toggle">
      <label>Dark Mode</label>
      <input type="checkbox" id="themeSwitch" checked />
    </div>
  </div>

  <!-- Main Content -->
  <div class="main-content">
    <div class="top-bar">
      <h2>Admin Dashboard</h2>
      <div class="notification-bell">
        <span id="notifIcon">ðŸ””</span>
        <div id="notifPopup" class="notif-popup">New transaction received!</div>
      </div>
    </div>

    <!-- UPI Settings Update Section -->
    <div class="card">
      <h3>Update UPI Settings</h3>
      <div class="form-group">
        <!---label for="adminUpi">UPI ID</label--->
        <input type="text" id="adminUpi" placeholder="Enter UPI ID" />
      </div>
      <div class="form-group">
        <!---label for="adminAmount">Amount</label--->
        <input type="number" id="adminAmount" placeholder="Enter Amount" />
      </div>
      <button id="saveUpiBtn">Save Settings</button>
    </div>

    <!-- Transaction Table -->
    <table class="txn-table">
      <thead>
        <tr>
          <th>UTR Number</th>
          <th>Amount</th>
          <th>App</th>
          <th>Date</th>
          <th>Status</th>
          <th>Action</th>
        </tr>
      </thead>
      <tbody id="transactionBody"></tbody>
    </table>

    <canvas id="statusChart" height="100"></canvas>
  </div>

  <!-- Toast Notification -->
  <div id="toast" class="toast">Approved successfully!</div>

  <script type="module" src="admin.js"></script>
</body>
</html>
